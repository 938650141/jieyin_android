# 戒瘾助手 - 核心算法说明

## 概述
戒瘾助手是一个帮助用户戒除成瘾行为的Android应用，通过记录日常活动（成功、失败、读书、运动、睡眠）来计算用户的戒瘾状态评分。

## 评分系统

### 评分范围
- **0-59.99分**: 严重成瘾 (红色)
- **60-79.99分**: 中度成瘾 (橙色)
- **80-94.99分**: 轻度成瘾 (绿色)
- **95-100分**: 已戒除 (蓝色)

### 基础分
- 初始基础分：**60分**

## 核心算法规则

### 1. 成功记录 (SUCCESS)
- **计分方式**: 根据距离上次成功或失败的时间间隔加分
- **公式**: 每天戒除成功 = +2分
- **上限**: 单次最多加10分
- **说明**: 
  - 时间间隔越长，得分越高
  - 鼓励长期保持戒除状态
  - 记录成功会重置失败计数

### 2. 失败记录 (FAILURE)
- **计分方式**: 根据失败次数和最近失败的密集程度扣分
- **公式**: 
  - 基础扣分 = 5分 + (总失败次数 × 0.5)
  - 密集扣分 = (7天内失败次数 - 1) × 2分
- **说明**:
  - 失败次数越多，扣分越严重
  - 短期内频繁失败会额外扣分
  - 失败记录会被累计追踪

### 3. 读书记录 (READING)
- **计分方式**: 根据输入的时长（分钟）加分
- **公式**: 每30分钟 = +1.5分
- **说明**:
  - 读书有助于转移注意力
  - 时长越长，得分越高
  - 无上限限制

### 4. 运动记录 (EXERCISE)
- **计分方式**: 根据输入的时长（分钟）加分
- **公式**: 每30分钟 = +2分
- **说明**:
  - 运动是戒除成瘾的重要辅助手段
  - 比读书加分更多，鼓励运动
  - 无上限限制

### 5. 睡眠记录 (SLEEP)
- **计分方式**: 根据输入的睡眠时长（分钟）加分或扣分
- **最佳睡眠时长**: 7-9小时
- **公式**:
  - 睡眠7-9小时: +2分
  - 睡眠不足7小时: 每少1小时扣1分
  - 睡眠超过9小时: 每多1小时扣0.5分
- **说明**:
  - 良好的睡眠对戒除成瘾很重要
  - 睡眠不足会降低自控力
  - 睡眠过多可能表示逃避现实

## 算法特点

### 1. 长期追踪
- 所有记录都会被永久保存
- 支持查看最近10条记录
- 可以清空所有数据重新开始

### 2. 合理性设计
- **分数有上下限**: 0-100分，防止极端值
- **时间衰减**: 失败记录超过7天不再计入密集度
- **递减效应**: 成功间隔超过一定天数后加分趋于平稳
- **平衡激励**: 正向行为（读书、运动、良好睡眠）可以弥补失败的负面影响

### 3. 心理学依据
- **即时反馈**: 每次记录后立即显示分数变化
- **可视化等级**: 用颜色和文字清晰展示当前状态
- **正向强化**: 成功和健康行为都能得到积分奖励
- **负向惩罚**: 失败会扣分，尤其是频繁失败

## 使用建议

1. **每日记录**: 建议每天至少记录一次（成功或其他活动）
2. **诚实记录**: 准确记录失败，这样算法才能真实反映状态
3. **多元活动**: 结合读书、运动、良好睡眠来提升分数
4. **长期坚持**: 戒除成瘾是长期过程，坚持使用才能看到效果

## 技术实现

### 数据存储
- 使用SharedPreferences + Gson存储
- 支持离线使用
- 数据保存在本地，保护隐私

### 核心类
- `AddictionScoreCalculator`: 核心算法实现
- `ActivityStorage`: 数据存储管理
- `MainActivity`: 主界面和用户交互

### 测试覆盖
- 包含完整的单元测试
- 验证各种场景下的评分逻辑
- 确保分数在合理范围内

## 未来改进方向

1. 添加数据统计图表
2. 支持导出/导入数据
3. 添加提醒功能
4. 个性化算法参数设置
5. 添加目标设定和里程碑
